/**
 * Global Styles & Design System
 *
 * WHY: This file establishes the design system foundation using Tailwind CSS.
 * It defines CSS custom properties (variables) that enable theme switching
 * and ensure design consistency across the application.
 *
 * ARCHITECTURE:
 * 1. @tailwind directives: Import Tailwind's utility classes
 * 2. CSS Variables: Define semantic color tokens (not direct colors)
 * 3. Theme Classes: '.dark' class overrides variables for dark mode
 * 4. Base Styles: Global element styling
 *
 * WHY CSS VARIABLES IN HSL FORMAT:
 * - HSL values (without 'hsl()' wrapper) allow Tailwind to apply opacity
 * - Example: bg-primary/50 applies primary color with 50% opacity
 * - Format: "hue saturation% lightness%" (e.g., "186 100% 42%" = cyan)
 *
 * WHY SEMANTIC NAMING:
 * - Colors are named by purpose (primary, muted) not appearance (blue, gray)
 * - This allows theme changes without refactoring component code
 * - Example: --primary can be cyan in light mode, same cyan in dark mode
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * Design System Tokens - Light Theme (Default)
 *
 * WHY :root: These are the default values applied to the <html> element.
 * They define the light theme and serve as fallbacks.
 */
@layer base {
  :root {
    /* Surface Colors */
    --background: 0 0% 100%;              /* Pure white - main background */
    --foreground: 222.2 84% 4.9%;         /* Near black - main text */

    /* Component Colors */
    --card: 0 0% 100%;                    /* White - card backgrounds */
    --card-foreground: 222.2 84% 4.9%;    /* Dark gray - card text */
    --popover: 0 0% 100%;                 /* White - popover backgrounds */
    --popover-foreground: 222.2 84% 4.9%; /* Dark gray - popover text */

    /* Brand Colors - Cyan from inspiration design */
    --primary: 186 100% 42%;              /* Cyan #06b6d4 - primary actions */
    --primary-foreground: 0 0% 100%;      /* White - text on primary */

    /* Secondary Colors */
    --secondary: 210 40% 96.1%;           /* Light gray - secondary actions */
    --secondary-foreground: 222.2 47.4% 11.2%; /* Dark - text on secondary */

    /* Muted Colors - Less prominent elements */
    --muted: 210 40% 96.1%;               /* Light gray - muted backgrounds */
    --muted-foreground: 215.4 16.3% 46.9%; /* Medium gray - muted text */

    /* Accent Colors - Highlights and hover states */
    --accent: 210 40% 96.1%;              /* Light gray - accent backgrounds */
    --accent-foreground: 222.2 47.4% 11.2%; /* Dark - text on accent */

    /* Destructive Colors - Errors and dangerous actions */
    --destructive: 0 84.2% 60.2%;         /* Red - destructive actions */
    --destructive-foreground: 210 40% 98%; /* Light - text on destructive */

    /* Form & Border Colors */
    --border: 214.3 31.8% 91.4%;          /* Light gray - borders */
    --input: 214.3 31.8% 91.4%;           /* Light gray - input borders */
    --ring: 186 100% 42%;                 /* Cyan - focus rings */

    /* Layout */
    --radius: 0.5rem;                     /* 8px - default border radius */
  }

  /**
   * Dark Theme Overrides
   *
   * WHY .dark class: Applied to <html> by ThemeContext when dark mode is active.
   * Only the values that need to change are redefined here.
   */
  .dark {
    /* Surface Colors - Inverted */
    --background: 222.2 84% 4.9%;         /* Near black - main background */
    --foreground: 210 40% 98%;            /* Light - main text */

    /* Component Colors - Dark surfaces */
    --card: 222.2 84% 4.9%;               /* Dark gray - card backgrounds */
    --card-foreground: 210 40% 98%;       /* Light - card text */
    --popover: 222.2 84% 4.9%;            /* Dark gray - popover backgrounds */
    --popover-foreground: 210 40% 98%;    /* Light - popover text */

    /* Brand Colors - Same cyan, works on dark */
    --primary: 186 100% 42%;              /* Cyan - unchanged */
    --primary-foreground: 0 0% 100%;      /* White - unchanged */

    /* Secondary Colors - Darker variants */
    --secondary: 217.2 32.6% 17.5%;       /* Dark gray - secondary actions */
    --secondary-foreground: 210 40% 98%;  /* Light - text on secondary */

    /* Muted Colors - Dark variants */
    --muted: 217.2 32.6% 17.5%;           /* Dark gray - muted backgrounds */
    --muted-foreground: 215 20.2% 65.1%;  /* Medium light - muted text */

    /* Accent Colors - Dark variants */
    --accent: 217.2 32.6% 17.5%;          /* Dark gray - accent backgrounds */
    --accent-foreground: 210 40% 98%;     /* Light - text on accent */

    /* Destructive Colors - Darker red */
    --destructive: 0 62.8% 30.6%;         /* Dark red - destructive actions */
    --destructive-foreground: 210 40% 98%; /* Light - text on destructive */

    /* Form & Border Colors - Dark variants */
    --border: 217.2 32.6% 17.5%;          /* Dark gray - borders */
    --input: 217.2 32.6% 17.5%;           /* Dark gray - input borders */
    --ring: 186 100% 42%;                 /* Cyan - focus rings (unchanged) */
  }
}

/**
 * Base Element Styles
 *
 * WHY: Global styles applied to all elements and the body.
 * These ensure consistent baseline styling.
 */
@layer base {
  * {
    /* WHY: All borders use the --border color from our design system */
    @apply border-border;
  }

  body {
    /* WHY: Body inherits background and text colors from design system */
    /* WHY font-mono: Matches the inspiration design's monospace aesthetic */
    @apply bg-background text-foreground font-mono;
  }
}

/**
 * Custom Scrollbar Styling
 *
 * WHY: Default browser scrollbars don't match our design system.
 * These styles create themed scrollbars that adapt to light/dark modes.
 */
@layer base {
  /* Webkit browsers (Chrome, Safari, Edge) */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: hsl(var(--muted));
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.3);
    border-radius: 4px;
    transition: background-color 0.2s ease;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.5);
  }

  ::-webkit-scrollbar-corner {
    background: hsl(var(--muted));
  }

  /* Firefox */
  * {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted-foreground) / 0.3) hsl(var(--muted));
  }
}

/**
 * Entity Highlight Animation
 *
 * WHY: When navigating to an entity via deep link, we need visual feedback
 * to show users which entity was selected. This creates a temporary highlight
 * that fades out after 2.5 seconds.
 *
 * USAGE: Applied by useScrollToEntity hook when scrolling to an entity
 */
@layer utilities {
  .entity-highlight {
    animation: entity-highlight-fade 2.5s ease-out forwards;
  }
}

@keyframes entity-highlight-fade {
  0% {
    background-color: hsl(var(--primary) / 0.2);
    box-shadow: 0 0 0 2px hsl(var(--primary) / 0.4);
  }
  40% {
    background-color: hsl(var(--primary) / 0.2);
    box-shadow: 0 0 0 2px hsl(var(--primary) / 0.4);
  }
  100% {
    background-color: transparent;
    box-shadow: 0 0 0 0 transparent;
  }
}
